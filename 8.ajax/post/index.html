<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>title</title>
</head>

<body>
  <form action="" name="userform">
    <input type="text" name="username"/>
  <input type="text" name="password"/>
  <input type="button" id="regBtn" value="注册"/>

  </form>
</body>
<script>

function serialize(form){
  //
  var elements = Array.prototype.slice.call(form.elements);
  var data = [];
   elements.forEach(function(element){
     var type = element.type;
     switch(type){
       case 'submit':
       case 'cancel':
       case 'reset':
       break;
       case 'text':
       data.push(element.name+"="+element.value);
     }
   })

   return data.join("&");
}

window.onload=function(){
  document.querySelector('#regBtn').addEventListener('click',function(){
alert(1);
     var xhr = new XMLHttpRequest;
    xhr.open('POST', 'books.json', true);
    xhr.responseType='json';//写过类型为json就不能获取xhr.responseText属性了
    xhr.onreadystatechange = function () {
        if (xhr.readyState == xhr.DONE && /2\d{2}/.test(xhr.status)) {

        }
    }
    var data=serialize(document.querySelector('form'));
    console.log(data);
    xhr.send(data);
    return false;
})
}

</script>

</html>
